---                                                         # Разделитель yaml-документа. Просто стандарт для YAML

- name: Install Nginx and dependencies on Ubuntu 24.04      # Описание playbook (что делает — для читаемости).
  hosts: web                                                # К каким хостам применять playbook. Тут "web" — это группа из файла hosts (inventory).
  become: yes                                               # Все задачи выполняются с повышением прав (через sudo).

  tasks:                                                    # Список задач (tasks), которые будут выполняться по очереди.
    - name: Update apt cache                                # Описание задачи: "Обновить кэш apt".
      apt:                                                  # Используется Ansible-модуль apt (для управления пакетами в Debian/Ubuntu).
        update_cache: yes                                   # Выполнить apt update, обновить индекс пакетов.
        cache_valid_time: 3600                              # Не обновлять кэш, если ему меньше 1 часа (3600 секунд).

    - name: Install required packages                       # Описание: "Установить нужные пакеты".
      apt:                                                  # Модуль apt снова.
        name:                                               # Список пакетов, которые будут устанавливаться (или обновляться).
          - nginx
          - python3-pip
          - python3-venv
          - curl
          - git
          # Добавь свои зависимости, если нужны (например, build-essential, unzip и т.д.)
        state: present                                      # Пакеты должны быть установлены (если нет — установит).

    - name: Ensure Nginx is enabled and started             # Описание: "Убедиться, что Nginx запущен и в автозапуске".
      service:                                              # Ansible-модуль для управления системными сервисами (systemd).
        name: nginx                                         # Сервис nginx.
        state: started                                      # Должен быть запущен (если не запущен — будет стартован).
        enabled: yes                                        # Добавить nginx в автозагрузку (systemctl enable nginx).

------------------------------------------------------------------------------------------------------------------------------------------------------------------
- hosts: webservers
  tasks:
  - name: Install Apache
    yum:
	  name: httpd
	  state: latest
  - name: Deploy Configuration files
    copy:
	  src: file/https.conf
	  dest: /etc/httpd.conf
-hosts: database_servers
 tasks:
 - name: Install Postgresql
   yum:
     name: postgresql
	 state: latest