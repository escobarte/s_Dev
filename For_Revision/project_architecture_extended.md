
# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
              ğŸŒ Public IP: 185.108.183.205
                         â”‚
                         â–¼
                  VIP: 10.100.93.2 (Keepalived)
                   â”‚               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                                     â–¼
    Prx01 (93.3)   <--unicast-->          Prx02 (93.4)
        â”‚                                     â”‚
        â””â”€â”€â”€â”€â”€â”€â†’ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ½Ğ° Laravel â†“â”€â”€â”€â”€â”˜
                   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
                   â–¼     â–¼     â–¼
                App01  App02  App03 (Zabbix)
                            â”‚
                            â–¼
                         DB01 (93.8)
                 â†’ MySQL (Laravel) + PostgreSQL (Zabbix) + DNS
```

---

## Ğ¡ĞµÑ€Ğ²ĞµÑ€Ñ‹

| ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | IP | Ğ Ğ¾Ğ»ÑŒ |
|----------|----|------|
| ğŸŒ Public IP | 185.108.183.205 | Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ¸Ğ·Ğ²Ğ½Ğµ |
| Prx01 | 10.100.93.3 | NGINX + Keepalived (VIP) |
| Prx02 | 10.100.93.4 | NGINX + Keepalived (VIP) |
| App01 | 10.100.93.5 | Laravel |
| App02 | 10.100.93.6 | Laravel |
| App03 | 10.100.93.7 | Laravel + Zabbix |
| DB01 | 10.100.93.8 | MySQL + PostgreSQL + DNS |

DNS (app.lab.local) Ğ¾Ğ±ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· DB01.

---

## ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

- **LVM**
- **PHP and modules**
- **Laravel + Composer + Artisan**
- **Apache2 + a2dissite/a2ensite**
- **MySQL**
- **NGINX (Upstream = Loadbalancer)**
- **Keepalived (Unicast)**
- **Bind9 / named / AppArmor**
- **HTTPS (Self-Signed SSL)**
- **IPTABLES**
- **Zabbix**
- **PostgreSQL**

---

## âœ… Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ»Ğ¸ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ?

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚             | ĞšĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ | ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ |
|-----------------------|---------------|-------------|
| MySQL (Laravel)       | âœ… Ğ”Ğ°          | MySQL Replication Ğ¸Ğ»Ğ¸ Galera Cluster |
| PostgreSQL (Zabbix)   | âœ… Ğ”Ğ°          | Streaming Replication + Patroni |
| Zabbix                | âš  Ğ§Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾     | ĞœĞ¾Ğ¶ĞµÑ‚ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ñ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ° PostgreSQL |
| DNS (BIND)            | âš  Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ failover | Master/Slave Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶ĞµĞ½, Ñ€ĞµĞ´ĞºĞ¾ Ğ½ÑƒĞ¶ĞµĞ½ |
| Laravel backend       | âœ… Ğ£Ğ¶Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ | App01â€“03 Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ¾Ğ¹ Ñ‡ĞµÑ€ĞµĞ· LB |

---

## ğŸ§± ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ³Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹ (Ñ€ĞµĞ°Ğ»Ğ¸ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     KUBERNETES   â•‘
â•‘ - Laravel Apps   â•‘
â•‘ - Zabbix Server  â•‘
â•‘ - Prometheus     â•‘
â•‘ - Grafana        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        â”‚
        â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ĞŸÑ€Ğ¾ĞºÑĞ¸ (VIP)   â•‘
â•‘  Prx01/Prx02 NGINX â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        â”‚
        â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     DB01 (bare OS) â•‘
â•‘ - MySQL            â•‘
â•‘ - PostgreSQL       â•‘
â•‘ - DNS              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
