## Linux Admin Cheatsheet

### üîÅ –û–±—â–∏–µ –∫–ª—é—á–∏ –∫–æ–º–∞–Ω–¥

```bash
-r  # Recursive ‚Äî —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ (–Ω–µ —Ç–æ–ª—å–∫–æ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –Ω–æ –∏ –≤–æ –≤—Å–µ—Ö –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö –∏ —Ñ–∞–π–ª–∞—Ö)
-f  # Follow ‚Äî —Å—Ä–∞–∑—É –≤—ã–≤–æ–¥–∏—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ tail)
```

---

### üìú –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)

```bash
# –£–±–∏—Ä–∞–µ–º –Ω–æ–º–µ—Ä–∞ –∏ –≤—Ä–µ–º—è –∏–∑ –≤—ã–≤–æ–¥–∞ history
history | awk '{$1=$2=$3="" ; print $0}' | sed 's/^ *//'
```

---

### üîç –ü–æ–∏—Å–∫ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
# –ù–∞–π—Ç–∏ —Ñ–∞–π–ª—ã —Å –∏–º–µ–Ω–µ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º "Gemeni" –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏—Ö
find /path/to/source/folder/ -maxdepth 1 -type f -name "*Gemeni*" -exec mv {} /path/to/destination/folder/ \;
```

---

### üîé –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Ñ–∞–π–ª–æ–≤

```bash
grep -r "unicast" /etc/                     # –ò—â–µ—Ç "unicast" –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö –≤–Ω—É—Ç—Ä–∏ /etc
grep -r ssl_cert *conf                      # –ò—â–µ—Ç "ssl_cert" –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º *conf
```

---

### üìÑ –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
tail -f /var/log/nginx                      # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å—Ç—Ä–æ–∫ + –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å—Ä–∞–∑—É

# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -n 50 /var/log/zabbix/zabbix_server.log

# –ö–∞–∫–∏–µ –∞–ø–¥–µ–π—Ç—ã –±—ã–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã
cat /var/log/apt/history.log
```

---

### üåê –°–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

```bash
ss -tuln | grep 5432                        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç –ª–∏ –ø–æ—Ä—Ç 5432
netstat                                     # –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç apt install net-tools)
netstat -tulnp | grep nginx                 # –ò–Ω—Ñ–æ –ø–æ nginx —á–µ—Ä–µ–∑ netstat
ss -tulnp | grep 80 | grep nginx            # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç –ª–∏ nginx –Ω–∞ –ø–æ—Ä—Ç—É 80
ip a                                        # –ü–æ–∫–∞–∑–∞—Ç—å IP –∞–¥—Ä–µ—Å–∞
ip a | grep 93.2                            # –ù–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π IP

telnet 10.100.93.4 22                       # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞ 22 –Ω–∞ IP

tcpdump -ni ens192                          # –°–ª—É—à–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ ens192 –±–µ–∑ DNS/–ø–æ—Ä—Ç–æ–≤
```

---

### üíΩ –†–∞–±–æ—Ç–∞ —Å –¥–∏—Å–∫–∞–º–∏

```bash
parted /dev/sda print free                  # –ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ sda
parted /dev/sdb1 unit GB print free         # –¢–æ –∂–µ, –Ω–æ –≤ –ì–ë

df -T                                       # –ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –ø–æ —Ñ–∞–π–ª–æ–≤—ã–º —Å–∏—Å—Ç–µ–º–∞–º

apt install sysstat                         # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

iostat                                      # I/O —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
vmstat                                      # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞–º—è—Ç–∏
```

---

### üìÇ –û—Ç–∫—Ä—ã—Ç—ã–µ —Ñ–∞–π–ª—ã –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã

```bash
lsof +f -- /mnt/dns                         # –ü–æ–∫–∞–∑–∞—Ç—å –∫—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç /mnt/dns
fuser -vm /mnt/dns                          # –¢–æ –∂–µ —Å–∞–º–æ–µ

ps l                                        # –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ –¥–ª–∏–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
ps aux                                      # –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
ps aux | grep nginx                         # –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ nginx
kill -9 <PID>                               # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
```

---

### üõ†Ô∏è –°–µ—Ä–≤–∏—Å—ã systemd

```bash
systemctl --type=service --state=running    # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

journalctl                  # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ª–æ–≥–∏
journalctl -u nginx         # –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
journalctl --since today    # –õ–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
journalctl -b               # –õ–æ–≥–∏ —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏
```

---

### üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –≥—Ä—É–ø–ø–∞–º–∏

```bash
/etc/shadow        # –•—Ä–∞–Ω–∏—Ç —Ö—ç—à–∏ –ø–∞—Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
/etc/passwd        # –ò–Ω—Ñ–æ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö (uid, shell –∏ —Ç–¥)
/etc/group         # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–∞—Ö
id zabbix          # –ò–Ω—Ñ–æ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ zabbix
```